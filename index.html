<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบขอเพลงประชาสัมพันธ์</title>
    
    <!-- 1. โหลด Tailwind CSS (สำหรับตกแต่งสวยงาม) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. โหลด React (ตัวทำงานหลัก) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 3. โหลด Babel (ตัวแปลงภาษาเพื่อให้ Browser เข้าใจ React) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 4. โหลดฟอนต์ Sarabun (Web Version) -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ตั้งค่าฟอนต์หลักทั้งเว็บ */
        body {
            font-family: 'Sarabun', sans-serif;
        }
        input, button, select, textarea {
            font-family: 'Sarabun', sans-serif;
        }
        
        /* เพิ่มระยะห่างตัวอักษรหัวข้อให้ดูทางการ */
        h1, h2, h3 {
           letter-spacing: 0.02em; 
        }

        /* อนิเมชั่นสำหรับตอนโหลด */
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-spin { animation: spin 1s linear infinite; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- พื้นที่แสดงผลแอพ -->
    <div id="root"></div>

    <!-- โค้ดการทำงานของโปรแกรม -->
    <script type="text/babel">
        const { useState } = React;

        // --- ส่วนประกอบไอคอน (สร้างเองเพื่อให้ไฟล์เดียวจบ ไม่ต้องพึ่งไฟล์นอก) ---
        const Icon = ({ path, className, size = 24, fill = "none", stroke = "currentColor" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke={stroke} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        // รวมไอคอนที่ใช้ทั้งหมด
        const Icons = {
            Music: (props) => <Icon {...props} path={<><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></>} />,
            User: (props) => <Icon {...props} path={<><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></>} />,
            Mail: (props) => <Icon {...props} path={<><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></>} />,
            Sun: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></>} />,
            Star: (props) => <Icon {...props} path={<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>} />,
            Moon: (props) => <Icon {...props} path={<path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>} />,
            Send: (props) => <Icon {...props} path={<><line x1="22" x2="11" y1="2" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></>} />,
            RotateCcw: (props) => <Icon {...props} path={<><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></>} />,
            CheckCircle: (props) => <Icon {...props} path={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></>} />,
            Loader2: (props) => <Icon {...props} path={<path d="M21 12a9 9 0 1 1-6.21-3.12"/>} />,
        };

        // --- ส่วนแอพหลัก ---
        const SongRequestApp = () => {
            
            // ตั้งค่าการเชื่อมต่อ Google Form (Hardcode ตามที่คุณต้องการ)
            const formConfig = {
                actionUrl: 'https://docs.google.com/forms/d/e/1FAIpQLSenjUCKAz_xXjh_NKLTiCUFqyoOGUelyYLKcx50xL9lNi95Lg/formResponse',
                fieldIds: {
                    name: 'entry.1770323833',        // ชื่อ
                    email: 'entry.1177266600',       // อีเมล
                    morningSong: 'entry.1301372596', // เพลงเช้า
                    lunchSong: 'entry.1016140276',   // เพลงกลางวัน
                    eveningSong: 'entry.967994178'   // เพลงเย็น
                }
            };

            // ตัวแปรเก็บข้อมูลฟอร์ม
            const [formData, setFormData] = useState({
                name: '', email: '', morningSong: '', lunchSong: '', eveningSong: ''
            });

            // สถานะการส่ง (idle=ปกติ, submitting=กำลังส่ง, success=สำเร็จ)
            const [status, setStatus] = useState('idle');

            // ฟังก์ชันเก็บค่าเมื่อพิมพ์
            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            // ฟังก์ชันส่งข้อมูล
            const handleSubmit = async (e) => {
                e.preventDefault();
                
                // ตรวจสอบความถูกต้อง
                if (!formData.name || !formData.email) {
                    alert("กรุณากรอกชื่อและอีเมลก่อนส่งข้อมูล");
                    return;
                }

                setStatus('submitting');
                
                // เตรียมข้อมูลส่ง
                const formBody = new FormData();
                formBody.append(formConfig.fieldIds.name, formData.name);
                formBody.append(formConfig.fieldIds.email, formData.email);
                formBody.append(formConfig.fieldIds.morningSong, formData.morningSong);
                formBody.append(formConfig.fieldIds.lunchSong, formData.lunchSong);
                formBody.append(formConfig.fieldIds.eveningSong, formData.eveningSong);

                try {
                    // ส่งข้อมูลไปยัง Google Form
                    await fetch(formConfig.actionUrl, {
                        method: 'POST',
                        mode: 'no-cors', // สำคัญ: ต้องใช้ no-cors เพื่อเลี่ยงปัญหาความปลอดภัยของ Browser
                        body: formBody
                    });

                    // แจ้งเตือนสำเร็จ
                    setStatus('success');
                    
                    // ล้างค่าฟอร์ม
                    setFormData({ name: '', email: '', morningSong: '', lunchSong: '', eveningSong: '' });
                    
                    // ซ่อนป้ายสำเร็จหลัง 5 วินาที
                    setTimeout(() => setStatus('idle'), 5000);

                } catch (error) {
                    console.error("Error:", error);
                    alert("เกิดข้อผิดพลาดในการส่งข้อมูล");
                    setStatus('idle');
                }
            };

            // ฟังก์ชันล้างข้อมูล
            const handleReset = () => {
                if (confirm("คุณต้องการล้างข้อมูลทั้งหมดใช่หรือไม่?")) {
                    setFormData({ name: '', email: '', morningSong: '', lunchSong: '', eveningSong: '' });
                }
            };

            return (
                <div className="min-h-screen p-4 md:p-8 flex justify-center items-start">
                    <div className="w-full max-w-2xl bg-white rounded-2xl shadow-lg overflow-hidden border border-slate-100 relative">
                        
                        {/* ส่วนหัว (Header) */}
                        <div className="bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white text-center shadow-sm relative">
                            <div className="flex justify-center mb-3">
                                <div className="bg-white/20 p-3 rounded-full backdrop-blur-sm">
                                    <Icons.Music size={32} />
                                </div>
                            </div>
                            <h1 className="text-3xl md:text-4xl font-bold mb-2 tracking-wide">แบบฟอร์มขอเพลง</h1>
                            <p className="text-blue-100 font-light text-lg opacity-90">ระบบรับคำขอเพลงประชาสัมพันธ์เสียงตามสาย</p>
                        </div>

                        {/* แบบฟอร์ม (Form) */}
                        <form onSubmit={handleSubmit} className="p-6 md:p-8 space-y-8">
                            
                            {/* 1. ข้อมูลผู้ขอ */}
                            <section className="space-y-4">
                                <h2 className="text-xl md:text-2xl font-bold text-slate-700 border-b pb-3 mb-4 flex items-center gap-2">
                                    <Icons.User size={26} className="text-blue-600"/> ข้อมูลผู้ขอเพลง
                                </h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
                                    <div className="space-y-2">
                                        <label className="text-lg font-bold text-slate-600">ชื่อ - นามสกุล <span className="text-red-500">*</span></label>
                                        <div className="relative">
                                            <div className="absolute left-3 top-3.5 text-slate-400"><Icons.User size={20}/></div>
                                            <input type="text" name="name" value={formData.name} onChange={handleInputChange} placeholder="ระบุชื่อของคุณ" required
                                                className="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all outline-none bg-slate-50 focus:bg-white text-base" />
                                        </div>
                                    </div>
                                    <div className="space-y-2">
                                        <label className="text-lg font-bold text-slate-600">อีเมล / เบอร์โทรศัพท์ <span className="text-red-500">*</span></label>
                                        <div className="relative">
                                            <div className="absolute left-3 top-3.5 text-slate-400"><Icons.Mail size={20}/></div>
                                            <input type="text" name="email" value={formData.email} onChange={handleInputChange} placeholder="ระบุช่องทางติดต่อ" required
                                                className="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all outline-none bg-slate-50 focus:bg-white text-base" />
                                        </div>
                                    </div>
                                </div>
                            </section>

                            {/* 2. รายการเพลง */}
                            <section className="space-y-6">
                                <h2 className="text-xl md:text-2xl font-bold text-slate-700 border-b pb-3 mb-4 flex items-center gap-2">
                                    <Icons.Music size={26} className="text-blue-600"/> เลือกช่วงเวลาและระบุเพลง
                                </h2>

                                {/* เพลงเช้า */}
                                <div className="group relative overflow-hidden rounded-xl border border-green-200 bg-gradient-to-br from-green-50 to-white hover:shadow-md transition-all duration-300">
                                    <div className="absolute top-0 left-0 w-2 h-full bg-green-500"></div>
                                    <div className="p-5">
                                        <div className="flex items-center gap-3 mb-3 text-green-800">
                                            <Icons.Sun size={28} className="fill-green-500 text-green-600" />
                                            <div>
                                                <h3 className="font-bold text-xl">เพลงช่วงเช้า</h3>
                                                <p className="text-base text-green-700 font-medium bg-green-100 px-3 py-0.5 rounded-full inline-block">07:00 - 07:30 น.</p>
                                            </div>
                                        </div>
                                        <input type="text" name="morningSong" value={formData.morningSong} onChange={handleInputChange} placeholder="พิมพ์ชื่อเพลงที่ต้องการขอช่วงเช้า..."
                                            className="w-full p-3 rounded-lg border border-green-200 bg-white/80 focus:bg-white focus:border-green-500 focus:ring-2 focus:ring-green-200 outline-none transition-all placeholder:text-slate-400 text-base" />
                                    </div>
                                </div>

                                {/* เพลงกลางวัน */}
                                <div className="group relative overflow-hidden rounded-xl border border-amber-200 bg-gradient-to-br from-amber-50 to-white hover:shadow-md transition-all duration-300">
                                    <div className="absolute top-0 left-0 w-2 h-full bg-amber-400"></div>
                                    <div className="p-5">
                                        <div className="flex items-center gap-3 mb-3 text-amber-800">
                                            <Icons.Star size={28} className="fill-amber-400 text-amber-500" />
                                            <div>
                                                <h3 className="font-bold text-xl">เพลงกลางวัน</h3>
                                                <p className="text-base text-amber-700 font-medium bg-amber-100 px-3 py-0.5 rounded-full inline-block">12:02 - 12:30 น.</p>
                                            </div>
                                        </div>
                                        <input type="text" name="lunchSong" value={formData.lunchSong} onChange={handleInputChange} placeholder="พิมพ์ชื่อเพลงที่ต้องการขอช่วงกลางวัน..."
                                            className="w-full p-3 rounded-lg border border-amber-200 bg-white/80 focus:bg-white focus:border-amber-400 focus:ring-2 focus:ring-amber-200 outline-none transition-all placeholder:text-slate-400 text-base" />
                                    </div>
                                </div>

                                {/* เพลงเย็น */}
                                <div className="group relative overflow-hidden rounded-xl border border-indigo-200 bg-gradient-to-br from-indigo-50 to-white hover:shadow-md transition-all duration-300">
                                    <div className="absolute top-0 left-0 w-2 h-full bg-indigo-500"></div>
                                    <div className="p-5">
                                        <div className="flex items-center gap-3 mb-3 text-indigo-800">
                                            <Icons.Moon size={28} className="fill-indigo-400 text-indigo-500" />
                                            <div>
                                                <h3 className="font-bold text-xl">เพลงหลังเลิกงาน</h3>
                                                <p className="text-base text-indigo-700 font-medium bg-indigo-100 px-3 py-0.5 rounded-full inline-block">17:20 น. เป็นต้นไป</p>
                                            </div>
                                        </div>
                                        <input type="text" name="eveningSong" value={formData.eveningSong} onChange={handleInputChange} placeholder="พิมพ์ชื่อเพลงที่ต้องการขอช่วงเย็น..."
                                            className="w-full p-3 rounded-lg border border-indigo-200 bg-white/80 focus:bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all placeholder:text-slate-400 text-base" />
                                    </div>
                                </div>
                            </section>

                            {/* ปุ่มกด (Buttons) */}
                            <div className="flex flex-col md:flex-row gap-4 pt-4 border-t border-slate-100">
                                <button type="submit" disabled={status === 'submitting'}
                                    className="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2 active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed text-lg">
                                    {status === 'submitting' ? <><Icons.Loader2 size={24} className="animate-spin" /> กำลังส่งข้อมูล...</> : <><Icons.Send size={24} /> ส่งรายการเพลง</>}
                                </button>
                                <button type="button" onClick={handleReset} disabled={status === 'submitting'}
                                    className="flex-1 bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold py-3 px-6 rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-70 text-lg">
                                    <Icons.RotateCcw size={24} /> ล้างข้อมูล
                                </button>
                            </div>
                        </form>

                        {/* แจ้งเตือนสำเร็จ (Success Notification) */}
                        {status === 'success' && (
                            <div className="fixed top-6 left-1/2 transform -translate-x-1/2 z-50 animate-bounce">
                                <div className="bg-green-600 text-white px-6 py-3 rounded-full shadow-xl flex items-center gap-3">
                                    <Icons.CheckCircle size={24} /> <span className="font-bold text-lg">ส่งคำขอเรียบร้อยแล้ว!</span>
                                </div>
                            </div>
                        )}
                        
                        <div className="fixed bottom-4 right-4 text-slate-400 text-sm text-right hidden md:block">แบบฟอร์มขอเพลงประชาสัมพันธ์ <br/>Font: Sarabun (Web Version)</div>
                    </div>
                </div>
            );
        };

        // Render แอพลงในหน้าเว็บ
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SongRequestApp />);
    </script>
</body>
</html>
