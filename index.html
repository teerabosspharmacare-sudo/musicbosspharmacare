<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ç‡∏≠‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô ‚òÄÔ∏èüéµ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 30px;
            padding: 0;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .form-content {
            padding: 30px 20px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        .input-group input[type="text"],
        .input-group input[type="email"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .input-group input[type="text"]:focus,
        .input-group input[type="email"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .time-period {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .time-period.morning {
            background: linear-gradient(135deg, #4bd752 0%, #4d5753 100%);
        }

        .time-period.afternoon {
            background: linear-gradient(135deg, hsl(61, 65%, 53%) 0%, hwb(58 35% 37%) 100%);
        }

        .time-period.evening {
            background: linear-gradient(135deg, #26cdc5 0%, #d791a7 100%);
        }

        .time-period h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: white;
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            color: white;
            font-weight: 500;
            font-size: 14px;
        }

        .song-input {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 8px;
            font-size: 13px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            margin-top: 10px;
        }

        .song-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .song-input:focus {
            outline: none;
            border-color: white;
            background: rgba(255, 255, 255, 0.3);
        }

        .remove-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
            padding: 0;
            margin-left: 8px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        button {
            flex: 1;
            padding: 14px 20px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-submit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-reset {
            background: #f0f0f0;
            color: #333;
        }

        .btn-reset:hover {
            background: #9b3e3e;
        }

        .message {
            padding: 15px;
            border-radius: 12px;
            margin-top: 15px;
            text-align: center;
            display: none;
            font-weight: 600;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            display: block;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            display: block;
        }

        .emoji {
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéµ ‡∏Ç‡∏≠‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h1>
            <p>‡∏Ç‡∏≠‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏∞!</p>
        </div>

        <form id="musicForm" class="form-content">
            <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏Ç‡∏≠ -->
            <div class="input-group">
                <label for="name">‡∏ä‡∏∑‡πà‡∏≠ *</label>
                <input type="text" id="name" name="name" placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" required>
            </div>

            <div class="input-group">
                <label for="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏• *</label>
                <input type="email" id="email" name="email" placeholder="your.email@example.com" required>
            </div>

            <!-- ‡πÄ‡∏û‡∏•‡∏á‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ä‡πâ‡∏≤ -->
            <div class="time-period morning">
                <h3><span class="emoji">‚òÄÔ∏è</span> ‡πÄ‡∏û‡∏•‡∏á‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ä‡πâ‡∏≤ (7:00 - 7:30)</h3>
                <div class="checkbox-group" id="morningContainer"></div>
                <input type="text" class="song-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏î Enter" data-period="morning">
            </div>

            <!-- ‡πÄ‡∏û‡∏•‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô -->
            <div class="time-period afternoon">
                <h3><span class="emoji">‚≠ê</span> ‡πÄ‡∏û‡∏•‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô (12:02 - 12:30)</h3>
                <div class="checkbox-group" id="afternoonContainer"></div>
                <input type="text" class="song-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏î Enter" data-period="afternoon">
            </div>

            <!-- ‡πÄ‡∏û‡∏•‡∏á‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏¥‡∏Å‡∏á‡∏≤‡∏ô -->
            <div class="time-period evening">
                <h3><span class="emoji">üåô</span> ‡πÄ‡∏û‡∏•‡∏á‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏¥‡∏Å‡∏á‡∏≤‡∏ô (17:20 ‡∏ô.)</h3>
                <div class="checkbox-group" id="eveningContainer"></div>
                <input type="text" class="song-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏î Enter" data-period="evening">
            </div>

            <div class="button-group">
                <button type="submit" class="btn-submit">‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏•‡∏á ‚úì</button>
                <button type="reset" class="btn-reset">‡∏•‡πâ‡∏≤‡∏á</button>
            </div>

            <div id="message" class="message"></div>
        </form>
    </div>

    <script>
        const form = document.getElementById('musicForm');
        const messageDiv = document.getElementById('message');
        const songInputs = document.querySelectorAll('.song-input');

        // ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
        const songs = {
            morning: [],
            afternoon: [],
            evening: []
        };

        // ‡πÄ‡∏û‡∏¥‡πà‡∏° event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö input ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á
        songInputs.forEach(input => {
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && this.value.trim()) {
                    e.preventDefault();
                    const period = this.dataset.period;
                    const songName = this.value.trim();
                    
                    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á‡∏•‡∏á‡πÉ‡∏ô‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå
                    songs[period].push(songName);
                    
                    // ‡∏™‡∏£‡πâ‡∏≤‡∏á checkbox item
                    addSongToUI(period, songName, songs[period].length - 1);
                    
                    this.value = '';
                }
            });
        });

        function addSongToUI(period, songName, index) {
            const container = document.getElementById(period + 'Container');
            const id = `${period}_${index}`;
            
            const checkboxItem = document.createElement('div');
            checkboxItem.className = 'checkbox-item';
            checkboxItem.innerHTML = `
                <input type="checkbox" id="${id}" name="${period}" value="${songName}" checked>
                <label for="${id}">${songName}</label>
                <button type="button" class="remove-btn" onclick="removeSong('${period}', ${index})">‚úï</button>
            `;
            
            container.appendChild(checkboxItem);
        }

        function removeSong(period, index) {
            songs[period].splice(index, 1);
            const container = document.getElementById(period + 'Container');
            container.innerHTML = '';
            
            songs[period].forEach((song, i) => {
                addSongToUI(period, song, i);
            });
        }

        form.addEventListener('submit', async function(e) {
            e.preventDefault();

            // ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            
            const morning = Array.from(document.querySelectorAll('input[name="morning"]:checked'))
                .map(cb => cb.value);
            const afternoon = Array.from(document.querySelectorAll('input[name="afternoon"]:checked'))
                .map(cb => cb.value);
            const evening = Array.from(document.querySelectorAll('input[name="evening"]:checked'))
                .map(cb => cb.value);

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡πÄ‡∏û‡∏•‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡πÄ‡∏û‡∏•‡∏á
            if (morning.length === 0 && afternoon.length === 0 && evening.length === 0) {
                showMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏•‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡πÄ‡∏û‡∏•‡∏á', 'error');
                return;
            }

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÑ‡∏õ Google Sheet
            const data = {
                timestamp: new Date().toLocaleString('th-TH'),
                name: name,
                email: email,
                morning: morning.join(', '),
                afternoon: afternoon.join(', '),
                evening: evening.join(', ')
            };

            try {
                // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á Google Sheets API ‡∏ú‡πà‡∏≤‡∏ô Formspree ‡∏´‡∏£‡∏∑‡∏≠ Google Apps Script
                // ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà URL ‡∏ô‡∏µ‡πâ‡∏î‡πâ‡∏ß‡∏¢ Google Apps Script Web App URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
                const response = await fetch('https://script.google.com/macros/s/AKfycbz9mmqBeUPOJkRQsjsvj9Xa983RS2uprGWutltBnzZp7QCAaQk9AzFhae-xHaAsrAfucA/exec', {
                    method: 'POST',
                    body: JSON.stringify(data),
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    showMessage('‚úì ‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏•‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞ üéµ', 'success');
                    form.reset();
                    songs.morning = [];
                    songs.afternoon = [];
                    songs.evening = [];
                    document.getElementById('morningContainer').innerHTML = '';
                    document.getElementById('afternoonContainer').innerHTML = '';
                    document.getElementById('eveningContainer').innerHTML = '';
                } else {
                    showMessage('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà', 'error');
                }
            } catch (error) {
                console.log('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á:', data);
                showMessage('‚úì ‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏•‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞ üéµ', 'success');
                form.reset();
                songs.morning = [];
                songs.afternoon = [];
                songs.evening = [];
                document.getElementById('morningContainer').innerHTML = '';
                document.getElementById('afternoonContainer').innerHTML = '';
                document.getElementById('eveningContainer').innerHTML = '';
            }
        });

        function showMessage(text, type) {
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            setTimeout(() => {
                messageDiv.className = 'message';
            }, 5000);
        }
    </script>
</body>
</html>
